{"ast":null,"code":"import { Tree, Branch, utils } from 'phylocanvas';\nconst {\n  getPixelRatio\n} = utils.canvas;\nconst DEFAULTS = {\n  active: true\n};\n\nfunction drawStats() {\n  console.log(this);\n}\n\nexport default function plugin(decorate) {\n  decorate(this, 'createTree', (delegate, args) => {\n    const tree = delegate(...args);\n    const [, config = {}] = args;\n    tree.treeStats = Object.assign({}, DEFAULTS, config.treeStats || {});\n    return tree;\n  });\n  console.log(\"this\", this);\n  decorate(Tree, 'load', function (delegate, args) {\n    delegate.apply(this, args);\n\n    if (this.treeStats.active) {\n      //for (let leaf in this.leaves) {\n      decorate(Branch, 'drawLabel', function (delegate, args) {\n        console.log(\"innerthis\", this.id);\n        delegate.apply(this, args);\n      }); //}\n      //drawStats.apply(this);\n    }\n  });\n}","map":{"version":3,"sources":["/var/www/pathogen-intelligence.tgen.org/epitools/my_modules/phylocanvas-plugin-tree-stats/index.js"],"names":["Tree","Branch","utils","getPixelRatio","canvas","DEFAULTS","active","drawStats","console","log","plugin","decorate","delegate","args","tree","config","treeStats","Object","assign","apply","id"],"mappings":"AAAA,SAASA,IAAT,EAAeC,MAAf,EAAuBC,KAAvB,QAAoC,aAApC;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAoBD,KAAK,CAACE,MAAhC;AAEA,MAAMC,QAAQ,GAAG;AACfC,EAAAA,MAAM,EAAE;AADO,CAAjB;;AAIA,SAASC,SAAT,GAAqB;AACnBC,EAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACD;;AAED,eAAe,SAASC,MAAT,CAAgBC,QAAhB,EAA0B;AACvCA,EAAAA,QAAQ,CAAC,IAAD,EAAO,YAAP,EAAqB,CAACC,QAAD,EAAWC,IAAX,KAAoB;AAC/C,UAAMC,IAAI,GAAGF,QAAQ,CAAC,GAAGC,IAAJ,CAArB;AACA,UAAM,GAAIE,MAAM,GAAG,EAAb,IAAoBF,IAA1B;AACAC,IAAAA,IAAI,CAACE,SAAL,GAAiBC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,QAAlB,EAA4BU,MAAM,CAACC,SAAP,IAAoB,EAAhD,CAAjB;AACA,WAAOF,IAAP;AACD,GALO,CAAR;AAOAN,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoB,IAApB;AAEAE,EAAAA,QAAQ,CAACX,IAAD,EAAO,MAAP,EAAe,UAAUY,QAAV,EAAoBC,IAApB,EAA0B;AAC/CD,IAAAA,QAAQ,CAACO,KAAT,CAAe,IAAf,EAAqBN,IAArB;;AAEA,QAAI,KAAKG,SAAL,CAAeV,MAAnB,EAA2B;AAEzB;AAEEK,MAAAA,QAAQ,CAACV,MAAD,EAAS,WAAT,EAAsB,UAAUW,QAAV,EAAoBC,IAApB,EAA0B;AACtDL,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB,KAAKW,EAA9B;AAEAR,QAAAA,QAAQ,CAACO,KAAT,CAAe,IAAf,EAAqBN,IAArB;AAED,OALO,CAAR,CAJuB,CAWzB;AACA;AAGD;AACF,GAnBO,CAAR;AAoBD","sourcesContent":["import { Tree, Branch, utils } from 'phylocanvas';\n\nconst { getPixelRatio } = utils.canvas;\n\nconst DEFAULTS = {\n  active: true,\n};\n\nfunction drawStats() {\n  console.log(this)\n}\n\nexport default function plugin(decorate) {\n  decorate(this, 'createTree', (delegate, args) => {\n    const tree = delegate(...args);\n    const [ , config = {} ] = args;\n    tree.treeStats = Object.assign({}, DEFAULTS, config.treeStats || {});\n    return tree;\n  });\n\n  console.log(\"this\", this)\n\n  decorate(Tree, 'load', function (delegate, args) {\n    delegate.apply(this, args);\n\n    if (this.treeStats.active) {\n\n      //for (let leaf in this.leaves) {\n\n        decorate(Branch, 'drawLabel', function (delegate, args) {\n          console.log(\"innerthis\", this.id)\n\n          delegate.apply(this, args)\n\n        })\n\n      //}\n      //drawStats.apply(this);\n\n\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"module"}