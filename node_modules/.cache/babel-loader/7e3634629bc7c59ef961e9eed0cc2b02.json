{"ast":null,"code":"import { Tree, utils } from 'phylocanvas';\nconst {\n  getPixelRatio\n} = utils.canvas;\nconst DEFAULTS = {\n  active: true,\n  pairwiseMatrix: {}\n};\n\nfunction buildPairwiseMatrix() {\n  const cxt = this.canvas;\n  const pixelRatio = getPixelRatio(cxt);\n  const tree = this;\n  console.log(\"pairwiseOps\", tree);\n}\n\nexport default function plugin(decorate) {\n  decorate(this, 'createTree', (delegate, args) => {\n    const tree = delegate(...args);\n    const [, config = {}] = args;\n    tree.pairwiseOps = Object.assign({}, DEFAULTS, config.pairwiseOps || {});\n    return tree;\n  });\n  decorate(Tree, 'draw', function (delegate, args) {\n    delegate.apply(this, args);\n\n    if (this.pairwiseOps.active) {\n      buildPairwiseMatrix.apply(this);\n    }\n  });\n}","map":{"version":3,"sources":["/var/www/epitools/my_modules/phylocanvas-plugin-pairwise-ops/index.js"],"names":["Tree","utils","getPixelRatio","canvas","DEFAULTS","active","pairwiseMatrix","buildPairwiseMatrix","cxt","pixelRatio","tree","console","log","plugin","decorate","delegate","args","config","pairwiseOps","Object","assign","apply"],"mappings":"AAAA,SAASA,IAAT,EAAeC,KAAf,QAA4B,aAA5B;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAoBD,KAAK,CAACE,MAAhC;AAEA,MAAMC,QAAQ,GAAG;AACfC,EAAAA,MAAM,EAAE,IADO;AAEfC,EAAAA,cAAc,EAAE;AAFD,CAAjB;;AAKA,SAASC,mBAAT,GAA+B;AAE7B,QAAMC,GAAG,GAAG,KAAKL,MAAjB;AACA,QAAMM,UAAU,GAAGP,aAAa,CAACM,GAAD,CAAhC;AACA,QAAME,IAAI,GAAG,IAAb;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BF,IAA3B;AAED;;AAED,eAAe,SAASG,MAAT,CAAgBC,QAAhB,EAA0B;AACvCA,EAAAA,QAAQ,CAAC,IAAD,EAAO,YAAP,EAAqB,CAACC,QAAD,EAAWC,IAAX,KAAoB;AAC/C,UAAMN,IAAI,GAAGK,QAAQ,CAAC,GAAGC,IAAJ,CAArB;AACA,UAAM,GAAIC,MAAM,GAAG,EAAb,IAAoBD,IAA1B;AACAN,IAAAA,IAAI,CAACQ,WAAL,GAAmBC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBhB,QAAlB,EAA4Ba,MAAM,CAACC,WAAP,IAAsB,EAAlD,CAAnB;AACA,WAAOR,IAAP;AACD,GALO,CAAR;AAMAI,EAAAA,QAAQ,CAACd,IAAD,EAAO,MAAP,EAAe,UAAUe,QAAV,EAAoBC,IAApB,EAA0B;AAC/CD,IAAAA,QAAQ,CAACM,KAAT,CAAe,IAAf,EAAqBL,IAArB;;AACA,QAAI,KAAKE,WAAL,CAAiBb,MAArB,EAA6B;AAC3BE,MAAAA,mBAAmB,CAACc,KAApB,CAA0B,IAA1B;AACD;AACF,GALO,CAAR;AAMD","sourcesContent":["import { Tree, utils } from 'phylocanvas';\n\nconst { getPixelRatio } = utils.canvas;\n\nconst DEFAULTS = {\n  active: true,\n  pairwiseMatrix: {},\n};\n\nfunction buildPairwiseMatrix() {\n\n  const cxt = this.canvas;\n  const pixelRatio = getPixelRatio(cxt);\n  const tree = this\n\n  console.log(\"pairwiseOps\", tree)\n\n}\n\nexport default function plugin(decorate) {\n  decorate(this, 'createTree', (delegate, args) => {\n    const tree = delegate(...args);\n    const [ , config = {} ] = args;\n    tree.pairwiseOps = Object.assign({}, DEFAULTS, config.pairwiseOps || {});\n    return tree;\n  });\n  decorate(Tree, 'draw', function (delegate, args) {\n    delegate.apply(this, args);\n    if (this.pairwiseOps.active) {\n      buildPairwiseMatrix.apply(this);\n    }   \n  });\n}\n"]},"metadata":{},"sourceType":"module"}