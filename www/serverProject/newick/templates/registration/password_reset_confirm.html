{% extends "default.html" %}

{% block title %}<title>Reset Password</title>{% endblock %}

{% block static %}
  {{ block.super }}
  {% load static %}

  <!-- redirect user if already logged in -->
  {% if user.is_authenticated %}
    <script>window.location.href = "/newick/"</script>
  {% endif %}

  <link href="{% static 'newick/css/accountStyle.css' %}" rel="stylesheet">
  <script src="{% static 'newick/js/accountScript.js' %}"></script>
{% endblock %}

{% block content %}
  {{ block.super }}

  {% if validlink %}
    <div class="form form-md">
      <div class="form-header">Reset Password Confirmation</div>
      <div class="form-body">
        <p>Please enter (and confirm) your new password.</p>
        <form action="" method="post">
          {% csrf_token %}
          <div class="form-group">
            <label for="id_new_password1">New password:</label>
            <input type="password" class="form-control" id={{ form.new_password1 }}</input>
            {{ form.new_password1.errors }}
          </div>
          <div class="form-group">
            <label for="id_new_password2">Confirm password:</label>
            <input type="password" class="form-control" id={{ form.new_password2 }}</input>
            {{ form.new_password2.errors }}
          </div>
          <div style="display:flex;" class="form-group">
            <button class="btn btn-info btn-lg form-submit" type="submit" value="Change my password">Change my password</button>  
          </div>
        </form>
      </div>
    </div>

  {% else %}
    <div class="form form-md">
      <div class="form-header">Reset Password Failed</div>
      <div class="form-body">
        <p>The password reset link was invalid, possibly because it has already been used. Please request a new password reset.</p>
      </div>
    </div>
  {% endif %}

{% endblock %}
